<div
  class="group bg-white rounded-2xl shadow-sm hover:shadow-xl transition-all duration-500 border border-slate-200/60
         flex flex-col h-full cursor-pointer overflow-hidden relative"
  (click)="onViewDetails()"
  role="article"
  [attr.aria-label]="'Card do pet ' + pet.nome + ', clique para ver detalhes'"
>
  <!-- Container da Imagem -->
  <div class="aspect-square bg-slate-100 relative overflow-hidden border-b border-slate-100">

    <!-- Fundo desfocado para preencher espaços vazios (Efeito Moderno) -->
    <img
      [src]="pet.foto?.url || defaultPetImage.url"
      class="absolute inset-0 w-full h-full object-cover blur-xl opacity-30 scale-110"
      aria-hidden="true"
    />

    <!-- Imagem Principal (Sem cortes) -->
    <img
      [src]="pet.foto?.url || defaultPetImage.url"
      [alt]="'Foto do pet ' + pet.nome"
      class="relative w-full h-full object-contain p-2 group-hover:scale-105 transition-transform duration-700 ease-out"
      loading="lazy"
    />

    <!-- Badge de Espécie -->
    @if (pet.especie) {
      <div class="absolute top-3 right-3">
        <span
          class="bg-white/90 backdrop-blur-md text-slate-700 text-[10px] font-bold px-2.5 py-1 rounded-lg shadow-sm uppercase tracking-wider border border-slate-200/50">
          {{ pet.especie }}
        </span>
      </div>
    }
  </div>

  <!-- Conteúdo do Card -->
  <div class="p-5 flex flex-col flex-1 bg-gradient-to-b from-white to-slate-50/30">
    <div class="mb-4">
      <h3 class="text-xl font-extrabold text-slate-800 truncate group-hover:text-blue-600 transition-colors"
          [title]="pet.nome">
        {{ pet.nome }}
      </h3>
      <div class="flex items-center gap-2 mt-1">
        <span class="text-blue-600/80 text-xs font-semibold px-2 py-0.5 bg-blue-50 rounded-md">
          {{ pet.raca || 'Raça não definida' }}
        </span>
      </div>
    </div>

    <div class="mt-auto space-y-4">
      <div class="flex items-center justify-between text-sm">
        <span class="flex items-center gap-1.5 text-slate-500 font-medium">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-blue-500" fill="none" viewBox="0 0 24 24"
               stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M21 15.546c-.523 0-1.046.151-1.5.454a2.704 2.704 0 01-3 0 2.704 2.704 0 00-3 0 2.704 2.704 0 01-3 0 2.704 2.704 0 00-3 0 2.704 2.704 0 01-1.5-.454M9 16v2m3-2v2m3-2v2M9 9h1m4 0h1m-6 4h.01M9 16h.01M12 16h.01M15 16h.01M12 12h.01M15 12h.01M18 12h.01M21 12h.01M3 12h.01M6 12h.01M3 16h.01M6 16h.01M21 16h.01"/>
          </svg>
          {{ pet.idade }} {{ pet.idade === 1 ? 'ano' : 'anos' }}
        </span>
      </div>

      <!-- Botões de Ação -->
      <div class="flex gap-2">
        <button
          (click)="onViewDetails()"
          class="flex-1 bg-slate-900 hover:bg-blue-600 text-white text-xs font-bold py-2.5 rounded-xl transition-all duration-300 active:scale-95 shadow-sm"
        >
          Detalhes
        </button>

        <button
          (click)="onEdit($event)"
          class="p-2.5 bg-slate-100 hover:bg-blue-100 text-slate-600 hover:text-blue-600 rounded-xl transition-all duration-300 border border-transparent hover:border-blue-200"
          title="Editar Pet"
        >
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"/>
          </svg>
        </button>

        <button
          (click)="onDelete($event)"
          [disabled]="isDeleting"
          class="p-2.5 bg-slate-100 hover:bg-red-100 text-slate-600 hover:text-red-600 rounded-xl transition-all duration-300 border border-transparent hover:border-red-200 disabled:opacity-50"
        >
          @if (isDeleting) {
            <span
              class="animate-spin inline-block w-5 h-5 border-2 border-current border-t-transparent rounded-full"></span>
          } @else {
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                 stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
            </svg>
          }
        </button>
      </div>
    </div>
  </div>
</div>
