<div class="max-w-2xl mx-auto p-6">
  <!-- Header -->
  <app-form-header
    backRoute="/pets"
    [title]="isEditMode ? 'Editar Tutor' : 'Cadastrar Novo Tutor'">
  </app-form-header>

  <!-- Formulário -->
  <form [formGroup]="tutorForm" (ngSubmit)="onSubmit()" class="bg-white rounded-xl shadow-lg p-8 space-y-6">
    <app-image-upload
      [previewUrl]="previewUrl"
      (fileSelected)="handleFileSelected($event)">
    </app-image-upload>

    <!-- Nome Completo -->
    <div>
      <label for="nome" class="block text-sm font-medium text-gray-700 mb-2">
        Nome Completo *
      </label>
      <input
        id="nome"
        type="text"
        formControlName="nome"
        placeholder="Ex: João da Silva"
        class="w-full px-4 py-3 border border-gray-300 rounded-lg
               focus:ring-2 focus:ring-blue-500 focus:outline-none"
        [class.border-red-500]="nomeControl?.invalid && nomeControl?.touched"
      />
      @if (nomeControl?.invalid && nomeControl?.touched) {
        <p class="mt-1 text-sm text-red-600">
          @if (nomeControl?.errors?.['required']) {
            Nome é obrigatório
          } @else if (nomeControl?.errors?.['minlength']) {
            Nome deve ter pelo menos 3 caracteres
          }
        </p>
      }
    </div>

    <!-- Email -->
    <div>
      <label for="email" class="block text-sm font-medium text-gray-700 mb-2">
        E-mail *
      </label>
      <input
        id="email"
        type="email"
        formControlName="email"
        placeholder="Ex: joao.silva@email.com"
        class="w-full px-4 py-3 border border-gray-300 rounded-lg
               focus:ring-2 focus:ring-blue-500 focus:outline-none"
        [class.border-red-500]="emailControl?.invalid && emailControl?.touched"
      />
      @if (emailControl?.invalid && emailControl?.touched) {
        <p class="mt-1 text-sm text-red-600">
          @if (emailControl?.errors?.['required']) {
            E-mail é obrigatório
          } @else if (emailControl?.errors?.['email']) {
            E-mail inválido
          }
        </p>
      }
    </div>

    <!-- Telefone com Máscara -->
    <div>
      <label for="telefone" class="block text-sm font-medium text-gray-700 mb-2">
        Telefone *
      </label>
      <input
        id="telefone"
        type="text"
        formControlName="telefone"
        appPhoneMask
        placeholder="(11) 91234-5678"
        class="w-full px-4 py-3 border border-gray-300 rounded-lg
               focus:ring-2 focus:ring-blue-500 focus:outline-none"
        [class.border-red-500]="telefoneControl?.invalid && telefoneControl?.touched"
      />
      @if (telefoneControl?.invalid && telefoneControl?.touched) {
        <p class="mt-1 text-sm text-red-600">Telefone é obrigatório</p>
      }
    </div>

    <!-- Endereço -->
    <div>
      <label for="endereco" class="block text-sm font-medium text-gray-700 mb-2">
        Endereço *
      </label>
      <textarea
        id="endereco"
        formControlName="endereco"
        rows="3"
        placeholder="Ex: Rua das Flores, 123, Bairro Centro, São Paulo - SP"
        class="w-full px-4 py-3 border border-gray-300 rounded-lg
               focus:ring-2 focus:ring-blue-500 focus:outline-none resize-none"
        [class.border-red-500]="enderecoControl?.invalid && enderecoControl?.touched">
      </textarea>
      @if (enderecoControl?.invalid && enderecoControl?.touched) {
        <p class="mt-1 text-sm text-red-600">Endereço é obrigatório</p>
      }
    </div>

    <!-- CPF com Máscara -->
    <div>
      <label for="cpf" class="block text-sm font-medium text-gray-700 mb-2">
        CPF *
      </label>
      <input
        id="cpf"
        type="text"
        formControlName="cpf"
        appCpfMask
        placeholder="000.000.000-00"
        class="w-full px-4 py-3 border border-gray-300 rounded-lg
               focus:ring-2 focus:ring-blue-500 focus:outline-none"
        [class.border-red-500]="cpfControl?.invalid && cpfControl?.touched"
      />
      @if (cpfControl?.invalid && cpfControl?.touched) {
        <p class="mt-1 text-sm text-red-600">
          @if (cpfControl?.errors?.['required']) {
            CPF é obrigatório
          } @else if (cpfControl?.errors?.['pattern']) {
            CPF deve conter exatamente 11 dígitos
          }
        </p>
      }
    </div>

    <app-form-actions
      cancelRoute="/tutors"
      [loading$]="loading$"
      [isSaving]="isSaving$"
      [isEditMode]="isEditMode"
      submitLabel="Cadastrar Tutor"
      editLabel="Salvar Alterações">
    </app-form-actions>
  </form>
</div>
