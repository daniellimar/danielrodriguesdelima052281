<div class="min-h-screen bg-gradient-to-br from-slate-50 via-purple-50/30 to-slate-50 py-8 px-4 sm:px-6 lg:px-8">
  <div class="max-w-7xl mx-auto">

    <app-page-header
      title="Tutores"
      subtitle="Responsáveis pelos pets"
      iconBgClass="from-purple-500 to-blue-600"
      actionLabel="Novo Tutor"
      actionRoute="/tutores/novo"
      [showSearch]="true"
      searchPlaceholder="Buscar tutor por nome..."
      [searchValue]="searchTerm"
      (searchChange)="onSearch($event)">

      <svg icon xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none"
           viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2a3 3 0 00-5.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2a3 3 0 015.356-1.857M15 7a3 3 0 11-6 0 3 3 0 016 0z"/>
      </svg>
    </app-page-header>

    <!-- Controles de Visualização -->
    <app-view-controls
      [viewMode]="viewMode"
      [cardsPerRow]="cardsPerRow"
      (viewModeChange)="setViewMode($event)"
      (cardsPerRowChange)="setCardsPerRow($event)"
      class="hidden md:block mb-6">
    </app-view-controls>

    <!-- Loading State -->
    @if (loading$ | async) {
      <div class="flex flex-col justify-center items-center py-20">
        <div class="relative">
          <div class="animate-spin rounded-full h-16 w-16 border-4 border-purple-200"></div>
          <div
            class="animate-spin rounded-full h-16 w-16 border-4 border-purple-600 border-t-transparent absolute top-0 left-0"></div>
        </div>
        <p class="text-slate-500 mt-4 font-medium">Carregando tutores...</p>
      </div>
    }

    <!-- Grid de Cards com Classes Dinâmicas -->
    @if (!(loading$ | async)) {
      <div [class]="getGridClasses() + ' mb-8 transition-all duration-300'">
        @for (tutor of tutores$ | async; track tutor.id) {
          <app-tutor-card
            [tutor]="tutor"
            [isDeleting]="deletingTutorId === tutor.id"
            (viewDetails)="onViewDetails($event)"
            (edit)="onEdit($event)"
            (delete)="onDelete($event)"
          />
        }
      </div>
    }

    <!-- Empty State Modernizado -->
    @if ((tutores$ | async)?.length === 0 && !(loading$ | async)) {
      <div class="bg-white rounded-3xl shadow-xl shadow-slate-200/50 border border-slate-100 p-12 text-center">
        <div class="w-24 h-24 bg-purple-50 text-purple-500 rounded-full flex items-center justify-center mx-auto mb-6">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12" fill="none" viewBox="0 0 24 24"
               stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/>
          </svg>
        </div>
        <h2 class="text-2xl font-black text-slate-800 mb-2">Nenhum tutor encontrado</h2>
        <p class="text-slate-500 mb-8">Comece cadastrando o primeiro tutor do sistema</p>
        <button
          routerLink="/tutores/novo"
          class="inline-flex items-center gap-2 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white px-8 py-3 rounded-xl font-bold shadow-lg shadow-purple-500/30 transition-all active:scale-95">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
          </svg>
          Cadastrar Primeiro Tutor
        </button>
      </div>
    }

    <!-- Paginação -->
    @if ((tutores$ | async)?.length ?? 0 > 0) {
      <app-pagination
        [currentPage]="(currentPage$ | async) ?? 0"
        [totalPages]="(totalPages$ | async) ?? 1"
        [totalElements]="(totalElements$ | async) ?? 0"
        [itemsPerPage]="10"
        (pageChange)="onPageChange($event)"
      />
    }
  </div>
</div>
